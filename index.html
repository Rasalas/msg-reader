<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msgReader</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='%233b82f6' class='size-6'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75'/%3E%3C/svg%3E">
    <script type="module" src="/src/js/main.js"></script>
</head>

<body>
    <!-- Skip Link for Keyboard Users -->
    <a href="#messageViewer" class="skip-link">Skip to message content</a>

    <!-- Screen Reader Announcements -->
    <div id="srAnnouncements" role="status" aria-live="polite" aria-atomic="true" class="sr-only"></div>

    <!-- Help Modal -->
    <div id="helpModal" class="help-modal" role="dialog" aria-modal="true" aria-labelledby="helpModalTitle">
        <div class="help-modal-backdrop"></div>
        <div class="help-modal-container">
            <div class="help-modal-header">
                <span class="help-modal-title">Keyboard Shortcuts</span>
                <button class="help-modal-close" aria-label="Close">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="help-modal-content">
                <!-- Content populated by KeyboardManager -->
            </div>
        </div>
    </div>

    <!-- Drop Overlay -->
    <div class="drop-overlay">
        <div class="drop-message">drop .msg/.eml files here</div>
    </div>

    <!-- Attachment Preview Modal -->
    <div id="attachmentModal" class="attachment-modal" role="dialog" aria-modal="true" aria-labelledby="attachmentModalFilename">
        <div class="attachment-modal-backdrop"></div>
        <div class="attachment-modal-container">
            <div class="attachment-modal-header">
                <span id="attachmentModalFilename" class="attachment-modal-filename" role="heading" aria-level="2"></span>
                <div class="attachment-modal-actions">
                    <a id="attachmentModalDownload" href="#" download="" class="attachment-modal-download" title="Download">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
                        </svg>
                    </a>
                    <button id="attachmentModalClose" class="attachment-modal-close" title="Close">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            <div id="attachmentModalContent" class="attachment-modal-content">
                <!-- Preview content inserted dynamically -->
            </div>
        </div>
        <!-- Navigation buttons (outside container to avoid overflow:hidden) -->
        <button id="attachmentModalPrev" class="attachment-modal-nav attachment-modal-nav-prev" title="Previous">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
            </svg>
        </button>
        <button id="attachmentModalNext" class="attachment-modal-nav attachment-modal-nav-next" title="Next">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
            </svg>
        </button>
    </div>

    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="welcome-screen">
        <div class="welcome-logo">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
            </svg>
            msgReader
        </div>
        <div class="welcome-content">
            drop .msg/.eml files here or <label class="browse-button">pick files<input type="file" id="fileInput" class="hidden" accept=".msg,.eml" multiple></label>
        </div>
        <a href="https://github.com/Rasalas/msg-reader" class="read-more-link" target="_blank" rel="noopener noreferrer">
            <span>made with ❤️ by Torben Buck</span>
            <span class="version-tag">__VERSION__</span>
        </a>
    </div>

    <!-- Main App -->
    <div id="appContainer" class="app-container" style="display: none;">
        <div class="message-list">
            <div class="app-logo">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
                </svg>
                msgReader
            </div>
            <div class="upload-area rounded-2xl border-2 border-dashed border-slate-300">
                <label>
                    drop .msg/.eml files here or click to upload
                    <input type="file" id="fileInputInApp" class="hidden" accept=".msg,.eml" multiple>
                </label>
            </div>
            <div id="search-container" class="search-container">
                <div class="search-input-wrapper">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    <input
                        type="search"
                        id="search-input"
                        placeholder="Search emails..."
                        class="search-input"
                        aria-label="Search emails"
                    />
                    <button id="search-clear" class="search-clear hidden" aria-label="Clear search">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div id="search-results-count" class="search-results-count hidden" aria-live="polite"></div>
            </div>
            <div id="messageItems" class="message-items" role="listbox" aria-label="Email messages" tabindex="0">
                <!-- Message items will be inserted here -->
            </div>
            <button id="shortcutHint" class="shortcut-hint" aria-label="Show keyboard shortcuts">
                Press <kbd>?</kbd> for shortcuts
            </button>
        </div>
        <div id="messageViewer" class="message-viewer" role="main" aria-label="Message content" tabindex="-1">
            <!-- Message content will be shown here -->
        </div>
    </div>
</body>

</html>
